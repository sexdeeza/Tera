/*
	名字:	聖誕禮物箱
	地圖:	聖誕禮物箱
	描述:	特殊消耗品
*/

var itemList = [2040000, 2040003, 2040018, 2040024, 2040027, 2040400, 2040414, 2040417, 2040420, 2040423, 2040500, 2040503, 2040512, 2040515, 2040530, 2040600, 2040614, 2040617, 2040620, 2040623, 2040700, 2040703, 2040706, 2040800, 2040803, 2040818, 2040823, 2040900, 2040913, 2040918, 2040923, 2040926, 2040929, 1072238, 1040081, 1382002, 1442021, 1072239, 1002096, 1322010, 1472005, 1002021, 1422007, 1082148, 1102081, 1040043, 1002117, 1302013, 1462024, 1382003, 1051001, 1472000, 1002088, 1472003, 1002048, 1002178, 1040007, 1002131, 1002288, 1002183, 1372006, 1442004, 1040082, 1322003, 2022195, 1412001, 1472009, 1060088, 1002035, 1322009, 1472016, 1332011, 1032027, 1002214, 1312014, 1002120, 1322023, 1452010, 1002034, 1060025, 1082147, 1002055, 1060019, 1002180, 1002154, 1060068, 1462013];
var potionList = [2000000, 2000001, 2000002, 2000003, 2000006, 2000007, 2000008, 2000009, 2000010, 2000011, 2002000, 2002001, 2002002, 2002003, 2002004, 2002005, 2002006, 2002007, 2002008, 2002009, 2002010];

function start() {
	if (im.getPlayer().getInventory(Packages.client.inventory.MapleInventoryType.ETC).getNumFreeSlot() < 1 && im.getPlayer().getInventory(Packages.client.inventory.MapleInventoryType.ETC).getNumFreeSlot() < 1) {
		im.getClient().getSession().write(Packages.tools.packet.CWvsContext.serverNotice(6, "拆開禮物箱之前，請在消耗欄，裝備欄各保留一個空位"));
		im.dispose();
		return;
		}
		im.gainItem(2430033, -1);
		item = Math.random() < 0.7 ? potionList[Math.floor(Math.random() * potionList.length)] : itemList[Math.floor(Math.random() * itemList.length)];
		im.gainItem(item, item > 2000000 && item < 2002010 ? 5 : 1);
		im.dispose();
}